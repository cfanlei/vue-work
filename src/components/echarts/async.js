!{
    "enterpriseDetail": [
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "企业英文全称",
            "old_value": "-",
            "new_value_desc": "CQHK",
            "new_value": "CQHK",
            "field_name": "englishFullName"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "成立日期",
            "old_value": "-",
            "new_value_desc": "2007/05/30",
            "new_value": "2007/05/30",
            "field_name": "foundDate"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "注册资本",
            "old_value": "-",
            "new_value_desc": "120000",
            "new_value": "120000",
            "field_name": "registeredCapital"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "法人代表",
            "old_value": "-",
            "new_value_desc": "赵在奎",
            "new_value": "赵在奎",
            "field_name": "legalRepresentative"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "联系电话",
            "old_value": "-",
            "new_value_desc": "023-88975023",
            "new_value": "023-88975023",
            "field_name": "contactPhone"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "币种",
            "old_value": "-",
            "new_value_desc": "人民币",
            "new_value": "CC_CNY",
            "field_name": "currency"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "官网",
            "old_value": "-",
            "new_value_desc": "www.baidu.com",
            "new_value": "www.baidu.com",
            "field_name": "officialWebsite"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "员工人数",
            "old_value": "-",
            "new_value_desc": "1000",
            "new_value": "1000",
            "field_name": "employeeNumber"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "空壳公司类别",
            "old_value": "-",
            "new_value_desc": "特殊目的公司",
            "new_value": "ST_TSMD",
            "field_name": "shellCompany"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "企业简称",
            "old_value": "-",
            "new_value_desc": "重庆航空",
            "new_value": "重庆航空",
            "field_name": "enterpriseShortName"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "英文简称",
            "old_value": "-",
            "new_value_desc": "CQHK",
            "new_value": "CQHK",
            "field_name": "enterpriseEnglishShortName"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "注册地址",
            "old_value": "-",
            "new_value_desc": "重庆市渝北区双凤桥街道江北机场内",
            "new_value": "重庆市渝北区双凤桥街道江北机场内",
            "field_name": "registerAddress"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "经营规模",
            "old_value": "-",
            "new_value_desc": "中型",
            "new_value": "中型",
            "field_name": "operationScale"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "是否平台公司",
            "old_value": "-",
            "new_value_desc": "否",
            "new_value": "0",
            "field_name": "isPlatformCompany"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "行业编码",
            "old_value": "-",
            "new_value_desc": "G_56",
            "new_value": "G_56",
            "field_name": "industryCode"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "注销类型",
            "old_value": "-",
            "new_value_desc": "因被收购或股权转让注销",
            "new_value": "IS_CANCEL_UNIT_YBSG",
            "field_name": "logoutType"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "所属国资委统一社会信用代码",
            "old_value": "-",
            "new_value_desc": "111111112222222222",
            "new_value": "111111112222222222",
            "field_name": "corpCd"
        },
        {
            "old_value_desc": "-",
            "flag": "2",
            "field": null,
            "old_value": "",
            "new_value_desc": "-",
            "new_value": null,
            "field_name": "id"
        },
        {
            "old_value_desc": "911100007178281201_2",
            "flag": "2",
            "field": null,
            "old_value": "911100007178281201_2",
            "new_value_desc": "-",
            "new_value": null,
            "field_name": "shareId"
        }
    ],
    "shareholderList": [
        [
            {
                "old_value_desc": "-",
                "flag": "1",
                "field": "股东名称",
                "old_value": "-",
                "new_value_desc": "张三",
                "new_value": "张三",
                "field_name": "shareholderName"
            },
            {
                "old_value_desc": "null",
                "flag": "2",
                "field": null,
                "old_value": "null",
                "new_value_desc": "-",
                "new_value": null,
                "field_name": "id"
            },
            {
                "old_value_desc": "null",
                "flag": "2",
                "field": null,
                "old_value": "null",
                "new_value_desc": "-",
                "new_value": null,
                "field_name": "enterpriseId"
            },
            {
                "old_value_desc": "1678668799380516864",
                "flag": "2",
                "field": null,
                "old_value": "1678668799380516864",
                "new_value_desc": "-",
                "new_value": null,
                "field_name": "shareId"
            }
        ],
        [
            {
                "old_value_desc": "-",
                "flag": "1",
                "field": "股东名称",
                "old_value": "-",
                "new_value_desc": "李四",
                "new_value": "李四",
                "field_name": "shareholderName"
            },
            {
                "old_value_desc": "null",
                "flag": "2",
                "field": null,
                "old_value": "null",
                "new_value_desc": "-",
                "new_value": null,
                "field_name": "id"
            },
            {
                "old_value_desc": "null",
                "flag": "2",
                "field": null,
                "old_value": "null",
                "new_value_desc": "-",
                "new_value": null,
                "field_name": "enterpriseId"
            },
            {
                "old_value_desc": "1678669261987082240",
                "flag": "2",
                "field": null,
                "old_value": "1678669261987082240",
                "new_value_desc": "-",
                "new_value": null,
                "field_name": "shareId"
            }
        ]
    ],
    "updaterId": null,
    "createTime": null,
    "enterprise": [
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "企业全称",
            "old_value": "-",
            "new_value_desc": "重庆航空有限公司",
            "new_value": "重庆航空有限公司",
            "field_name": "fullName"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "新增类型",
            "old_value": "-",
            "new_value_desc": "因收购或投资入股而获得控股权",
            "new_value": "AT_QT1",
            "field_name": "sourceType"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "单位类型",
            "old_value": "-",
            "new_value_desc": "法人单位",
            "new_value": "UTF_Y",
            "field_name": "departmentType"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "组织形式大类",
            "old_value": "-",
            "new_value_desc": "非公司制企业",
            "new_value": "B",
            "field_name": "orgFormMax"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "组织形式中类",
            "old_value": "-",
            "new_value_desc": "其他非公司制企业",
            "new_value": "B_02",
            "field_name": "orgFormCenter"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "组织形式小类",
            "old_value": "-",
            "new_value_desc": "有限合伙企业",
            "new_value": "B_02_001",
            "field_name": "orgFormMin"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "境内/境外",
            "old_value": "-",
            "new_value_desc": "境内",
            "new_value": "IES_N",
            "field_name": "inOrOut"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "是否上市",
            "old_value": "-",
            "new_value_desc": "是",
            "new_value": "1",
            "field_name": "isBeListed"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "是否纳入结算",
            "old_value": "-",
            "new_value_desc": "否",
            "new_value": "0",
            "field_name": "isIncludeSettlement"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "法人层级",
            "old_value": "-",
            "new_value_desc": "1",
            "new_value": "1",
            "field_name": "legalPersonLevel"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "管理层级",
            "old_value": "-",
            "new_value_desc": "1",
            "new_value": "1",
            "field_name": "managementLevel"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "经营状态",
            "old_value": "-",
            "new_value_desc": "开业",
            "new_value": "开业",
            "field_name": "operationStatus"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "所属大洲",
            "old_value": "-",
            "new_value_desc": "铁东区",
            "new_value": "1",
            "field_name": "continentId"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "所属国家",
            "old_value": "-",
            "new_value_desc": "中国",
            "new_value": "1419468836184449025",
            "field_name": "countryId"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "所在省",
            "old_value": "-",
            "new_value_desc": "重庆市",
            "new_value": "1419468953574629378",
            "field_name": "stateId"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "所在市",
            "old_value": "-",
            "new_value_desc": "沙坪坝区",
            "new_value": "1438025606013599746",
            "field_name": "cityId"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "经营范围",
            "old_value": "-",
            "new_value_desc": "许可项目：国内（含港澳台）航空客货运输业务，至周边国家的国际航空客货运输业务，货物及技术进出口，商务信息咨询，代订酒店，代订景区门票，酒店管理，住宿，餐饮服务，食品销售，卷烟零售，广告设计、制作、发布、代理",
            "new_value": "许可项目：国内（含港澳台）航空客货运输业务，至周边国家的国际航空客货运输业务，货物及技术进出口，商务信息咨询，代订酒店，代订景区门票，酒店管理，住宿，餐饮服务，食品销售，卷烟零售，广告设计、制作、发布、代理",
            "field_name": "manageScope"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "经营期限自",
            "old_value": "-",
            "new_value_desc": "2007/05/30",
            "new_value": "2007/05/30",
            "field_name": "manageDeadlineStart"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "经营期限至",
            "old_value": "-",
            "new_value_desc": "2027/05/29",
            "new_value": "2027/05/29",
            "field_name": "manageDeadlineEnd"
        },
        {
            "old_value_desc": "-",
            "flag": "2",
            "field": null,
            "old_value": "",
            "new_value_desc": "-",
            "new_value": null,
            "field_name": "id"
        },
        {
            "old_value_desc": "911100007178281201_2",
            "flag": "2",
            "field": null,
            "old_value": "911100007178281201_2",
            "new_value_desc": "-",
            "new_value": null,
            "field_name": "shareId"
        },
        {
            "old_value_desc": "-",
            "flag": "2",
            "field": null,
            "old_value": "",
            "new_value_desc": "1419468836184449025",
            "new_value": "1419468836184449025",
            "field_name": "country_id_back"
        },
        {
            "old_value_desc": "-",
            "flag": "2",
            "field": null,
            "old_value": "",
            "new_value_desc": "1419468953574629378",
            "new_value": "1419468953574629378",
            "field_name": "state_id_back"
        },
        {
            "old_value_desc": "-",
            "flag": "2",
            "field": null,
            "old_value": "",
            "new_value_desc": "1438025606013599746",
            "new_value": "1438025606013599746",
            "field_name": "city_id_back"
        },
        {
            "old_value_desc": "-",
            "flag": "2",
            "field": null,
            "old_value": "",
            "new_value_desc": "null",
            "new_value": "null",
            "field_name": "region_id_back"
        },
        {
            "old_value_desc": "null",
            "flag": "2",
            "field": null,
            "old_value": "null",
            "new_value_desc": "-",
            "new_value": null,
            "field_name": "parentLegalDepartmentId"
        },
        {
            "old_value_desc": "null",
            "flag": "2",
            "field": null,
            "old_value": "null",
            "new_value_desc": "-",
            "new_value": null,
            "field_name": "parentManagementDepartmentId"
        }
    ],
    "enterpriseEquityList": [
        [
            {
                "old_value_desc": "-",
                "flag": "1",
                "field": "单位名称",
                "old_value": "-",
                "new_value_desc": "xx001",
                "new_value": "xx001",
                "field_name": "departmentName"
            },
            {
                "old_value_desc": "-",
                "flag": "1",
                "field": "单位类型",
                "old_value": "-",
                "new_value_desc": "法人单位",
                "new_value": "UTF_Y",
                "field_name": "departmentType"
            },
            {
                "old_value_desc": "-",
                "flag": "1",
                "field": "境内外标志名称",
                "old_value": "-",
                "new_value_desc": "境内",
                "new_value": "IES_N",
                "field_name": "inOrOut"
            },
            {
                "old_value_desc": "-",
                "flag": "1",
                "field": "持股比例",
                "old_value": "-",
                "new_value_desc": "5",
                "new_value": "5",
                "field_name": "shareholdingRatio"
            },
            {
                "old_value_desc": "1678667669682483200",
                "flag": "2",
                "field": null,
                "old_value": "1678667669682483200",
                "new_value_desc": "-",
                "new_value": null,
                "field_name": "shareId"
            },
            {
                "old_value_desc": "null",
                "flag": "2",
                "field": null,
                "old_value": "null",
                "new_value_desc": "-",
                "new_value": null,
                "field_name": "id"
            },
            {
                "old_value_desc": "null",
                "flag": "2",
                "field": null,
                "old_value": "null",
                "new_value_desc": "-",
                "new_value": null,
                "field_name": "enterpriseId"
            }
        ],
        [
            {
                "old_value_desc": "-",
                "flag": "1",
                "field": "单位名称",
                "old_value": "-",
                "new_value_desc": "XXX",
                "new_value": "XXX",
                "field_name": "departmentName"
            },
            {
                "old_value_desc": "-",
                "flag": "1",
                "field": "单位类型",
                "old_value": "-",
                "new_value_desc": "法人单位",
                "new_value": "UTF_Y",
                "field_name": "departmentType"
            },
            {
                "old_value_desc": "-",
                "flag": "1",
                "field": "境内外标志名称",
                "old_value": "-",
                "new_value_desc": "境外",
                "new_value": "IES_W",
                "field_name": "inOrOut"
            },
            {
                "old_value_desc": "-",
                "flag": "1",
                "field": "持股比例",
                "old_value": "-",
                "new_value_desc": "20",
                "new_value": "20",
                "field_name": "shareholdingRatio"
            },
            {
                "old_value_desc": "1678668014684958720",
                "flag": "2",
                "field": null,
                "old_value": "1678668014684958720",
                "new_value_desc": "-",
                "new_value": null,
                "field_name": "shareId"
            },
            {
                "old_value_desc": "null",
                "flag": "2",
                "field": null,
                "old_value": "null",
                "new_value_desc": "-",
                "new_value": null,
                "field_name": "id"
            },
            {
                "old_value_desc": "null",
                "flag": "2",
                "field": null,
                "old_value": "null",
                "new_value_desc": "-",
                "new_value": null,
                "field_name": "enterpriseId"
            }
        ]
    ],
    "creatorId": null,
    "enterpriseHoldings": [
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "上级控股单位控股比例",
            "old_value": "-",
            "new_value_desc": "23",
            "new_value": "23",
            "field_name": "superiorHoldingsRatio"
        },
        {
            "old_value_desc": "null",
            "flag": "2",
            "field": null,
            "old_value": "null",
            "new_value_desc": "-",
            "new_value": null,
            "field_name": "id"
        },
        {
            "old_value_desc": "null",
            "flag": "2",
            "field": null,
            "old_value": "null",
            "new_value_desc": "-",
            "new_value": null,
            "field_name": "enterpriseId"
        },
        {
            "old_value_desc": "911100007178281201_2",
            "flag": "2",
            "field": null,
            "old_value": "911100007178281201_2",
            "new_value_desc": "-",
            "new_value": null,
            "field_name": "shareId"
        }
    ],
    "updateTime": null,
    "id": null,
    "enterprisePerson": [
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "是否法人代表",
            "old_value": "-",
            "new_value_desc": "否",
            "new_value": "否",
            "field_name": "isLegalRepresentative"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "邮箱",
            "old_value": "-",
            "new_value_desc": "30820380@qq.com",
            "new_value": "30820380@qq.com",
            "field_name": "email"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "联系人电话",
            "old_value": "-",
            "new_value_desc": "18592928392",
            "new_value": "18592928392",
            "field_name": "contactPhone"
        },
        {
            "old_value_desc": "-",
            "flag": "1",
            "field": "联系人",
            "old_value": "-",
            "new_value_desc": "王杰",
            "new_value": "王杰",
            "field_name": "contactName"
        },
        {
            "old_value_desc": "null",
            "flag": "2",
            "field": null,
            "old_value": "null",
            "new_value_desc": "-",
            "new_value": null,
            "field_name": "id"
        },
        {
            "old_value_desc": "-",
            "flag": "2",
            "field": null,
            "old_value": "",
            "new_value_desc": "-",
            "new_value": null,
            "field_name": "enterpriseId"
        },
        {
            "old_value_desc": "911100007178281201_1",
            "flag": "2",
            "field": null,
            "old_value": "911100007178281201_1",
            "new_value_desc": "-",
            "new_value": null,
            "field_name": "shareId"
        }
    ]
}

const data = this.getParams('data');
let shareholderListData = null
let enterpriseEquityData = null
if(data.shareholderList?.length>0){
  shareholderListData = data.shareholderList.map(shareholder=>{
    if(shareholder?.length>0){
      const showShareholderList =  shareholder.filter(item =>item.flag === "1")
      const initVal = {
                    "old_value_desc": "",
                    "flag": "",
                    "field": "",
                    "old_value": "",
                    "new_value_desc": "",
                    "new_value": "",
                    "field_name": ""
                }
      const rowData  = showShareholderList.reduce((pre,cur,index)=>{
        const temp = _.cloneDeep(cur) 
        temp.field = index>0? pre.field+ "/"+ cur.field :pre.field+ cur.field
        temp.new_value_desc = index>0? pre.new_value_desc+ "/"+ cur.new_value_desc :pre.new_value_desc+ cur.new_value_desc
        temp.old_value_desc = index>0? pre.old_value_desc+ "/"+ cur.old_value_desc :pre.old_value_desc+ cur.old_value_desc
        return temp
      },initVal)
      const newValue = [] //传递给后端的数据{key :value}
      let tempObj = {}
      showShareholderList.forEach(item =>{
        tempObj[item.field_name] = item.new_value
      })
      newValue.push(tempObj)
      rowData.new_value = newValue
      rowData.field_name = "shareholderList"
      rowData.flag ="1"
      return rowData
    }
  })
}

if(data.enterpriseEquityList?.length>0){
  enterpriseEquityData = data.enterpriseEquityList.map(enterpriseEquity=>{
    if(enterpriseEquity?.length>0){
      const enterpriseEquityList =  enterpriseEquity.filter(item =>item.flag === "1")
      const initVal = {
                    "old_value_desc": "",
                    "flag": "1",
                    "field": "",
                    "old_value": "",
                    "new_value_desc": "",
                    "new_value": "",
                    "field_name": ""
                }
      const rowData  = enterpriseEquityList.reduce((pre,cur,index)=>{
        const temp = _.cloneDeep(cur) 
        temp.field = index>0? pre.field+ "/"+ cur.field :pre.field+ cur.field
        temp.new_value_desc = index>0? pre.new_value_desc+ "/"+ cur.new_value_desc :pre.new_value_desc+ cur.new_value_desc
        temp.old_value_desc = index>0? pre.old_value_desc+ "/"+ cur.old_value_desc :pre.old_value_desc+ cur.old_value_desc
        return temp
      },initVal)
      const newValue = [] //传递给后端的数据{key :value}
      let tempObj ={}
      enterpriseEquityList.forEach(item =>{
        tempObj[item.field_name] = item.new_value
      })
      newValue.push(tempObj)
      rowData.new_value = newValue
      rowData.field_name = "enterpriseEquityList"
      rowData.flag ="1"
      return rowData
    }
  })
}
debugger
data.shareholderList = shareholderListData
data.enterpriseEquityList = enterpriseEquityData
const self = this
Object.keys(data).forEach(item=>{
  const ins = self.getWidgetRef(item)
  if(ins){
    const arr  = data[item] || []
    ins.gridOptions.data = arr.filter(item=>item.flag ==="1")
    self.getWidgetRef(item+"Container").setHidden(!arr.length);
  }
})